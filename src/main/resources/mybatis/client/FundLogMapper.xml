<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zxiang.project.client.fundLog.mapper.FundLogMapper">
    
    <resultMap type="FundLog" id="FundLogResult">
        <result property="payId"    column="pay_id"    />
        <result property="clientId"    column="client_id"    />
        <result property="clientType"    column="client_type"    />
        <result property="serial"    column="serial"    />
        <result property="totalFee"    column="total_fee"    />
        <result property="balance"    column="balance"    />
        <result property="content"    column="content"    />
        <result property="type"    column="type"    />
        <result property="status"    column="status"    />
        <result property="createTime"    column="create_time"    />
        <result property="remark"    column="remark"    />
    </resultMap>
	
	<sql id="selectFundLogVo">
        select pay_id, client_id,client_type, serial, total_fee, balance, content, type, status, create_time, remark from zx_fund_log
    </sql>
	
    <select id="selectFundLogList" parameterType="FundLog" resultMap="FundLogResult">
        <include refid="selectFundLogVo"/>
        <where>  
            <if test="payId != null and payId != ''"> and pay_id = #{payId}</if>
             <if test="clientId != null and clientId != ''"> and client_id = #{clientId}</if>
             <if test="clientType != null and clientType != ''"> and client_type = #{clientType}</if>
             <if test="serial != null and serial != ''"> and serial = #{serial}</if>
             <if test="totalFee != null and totalFee != ''"> and total_fee = #{totalFee}</if>
             <if test="balance != null and balance != ''"> and balance = #{balance}</if>
             <if test="content != null and content != ''"> and content = #{content}</if>
             <if test="type != null and type != ''"> and type = #{type}</if>
             <if test="status != null and status != ''"> and status = #{status}</if>
             <if test="createTime != null "> and create_time = #{createTime}</if>
             <if test="remark != null and remark != ''"> and remark = #{remark}</if>
         </where>
         order by create_time desc
    </select>
    
    <select id="selectFundLogById" parameterType="Integer" resultMap="FundLogResult">
        <include refid="selectFundLogVo"/>
        where pay_id = #{payId}
    </select>
        
    <insert id="insertFundLog" parameterType="FundLog" useGeneratedKeys="true" keyProperty="payId">
        insert into zx_fund_log
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="payId != null and payId != '' ">pay_id,</if>
			<if test="clientId != null and clientId != '' ">client_id,</if>
			<if test="clientType != null and clientType != ''"> client_type,</if>
			<if test="serial != null and serial != '' ">serial,</if>
			<if test="totalFee != null and totalFee != '' ">total_fee,</if>
			<if test="balance != null and balance != '' ">balance,</if>
			<if test="content != null and content != '' ">content,</if>
			<if test="type != null and type != '' ">type,</if>
			<if test="status != null and status != '' ">status,</if>
			<if test="createTime != null">create_time,</if>
			<if test="remark != null and remark != '' ">remark,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="payId != null and payId != ''">#{payId},</if>
			<if test="clientId != null and clientId != ''">#{clientId},</if>
			<if test="clientType != null and clientType != ''"> #{clientType},</if>
			<if test="serial != null and serial != ''">#{serial},</if>
			<if test="totalFee != null and totalFee != ''">#{totalFee},</if>
			<if test="balance != null and balance != ''">#{balance},</if>
			<if test="content != null and content != ''">#{content},</if>
			<if test="type != null and type != ''">#{type},</if>
			<if test="status != null and status != ''">#{status},</if>
			<if test="createTime != null">#{createTime},</if>
			<if test="remark != null and remark != ''">#{remark},</if>
         </trim>
    </insert>
	 
    <update id="updateFundLog" parameterType="FundLog">
        update zx_fund_log
        <trim prefix="SET" suffixOverrides=",">
            <if test="clientId != null  ">client_id = #{clientId},</if>
            <if test="clientType != null and clientType != ''">client_type = #{clientType},</if>
            <if test="serial != null  and serial != ''  ">serial = #{serial},</if>
            <if test="totalFee != null  ">total_fee = #{totalFee},</if>
            <if test="balance != null  ">balance = #{balance},</if>
            <if test="content != null  and content != ''  ">content = #{content},</if>
            <if test="type != null  and type != ''  ">type = #{type},</if>
            <if test="status != null  and status != ''  ">status = #{status},</if>
            <if test="createTime != null  ">create_time = #{createTime},</if>
            <if test="remark != null  and remark != ''  ">remark = #{remark},</if>
        </trim>
        where pay_id = #{payId}
    </update>

	<delete id="deleteFundLogById" parameterType="Integer">
        delete from zx_fund_log where pay_id = #{payId}
    </delete>
	
    <delete id="deleteFundLogByIds" parameterType="String">
        delete from zx_fund_log where pay_id in 
        <foreach item="payId" collection="array" open="(" separator="," close=")">
            #{payId}
        </foreach>
    </delete>
    <update id="updateStatus">
        update zx_fund_log set status = #{status},remark =#{remark} where pay_id = #{payId}
    </update>
</mapper>