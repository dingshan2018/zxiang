<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zxiang.project.client.fundLog.mapper.WithdrawDepositMapper">
    
    <resultMap type="WithdrawDeposit" id="WithdrawDepositResult">
        <result property="id"    column="id"    />
        <result property="fundLogId"    column="fund_log_id"    />
        <result property="serial"    column="serial"    />
        <result property="clientId"    column="client_id"    />
        <result property="clientType"    column="client_type"    />
        <result property="clientName"    column="client_name"    />
        <result property="money"    column="money"    />
        <result property="balance"    column="balance"    />
        <result property="managerPhone"    column="manager_phone"    />
        <result property="bankAccount"    column="bank_account"    />
        <result property="bankReceiver"    column="bank_receiver"    />
        <result property="bankName"    column="bank_name"    />
        <result property="status"    column="status"    />
        <result property="createTime"    column="create_time"    />
        <result property="payer"    column="payer"    />
        <result property="payTime"    column="pay_time"    />
        <result property="remark"    column="remark"    />
    </resultMap>
	
	<sql id="selectWithdrawDepositVo">
        select id, fund_log_id, serial, client_id, client_type, client_name, money, balance, manager_phone, bank_account, bank_receiver, bank_name, status, create_time, payer, pay_time, remark from zx_withdraw_deposit
    </sql>
    
    <sql id="selectWithdrawDepositVos">
        select distinct a.id, a.fund_log_id, a.serial, a.client_id, a.client_type, a.client_name, a.money, a.balance, a.manager_phone, a.bank_account, a.bank_receiver, a.bank_name, a.status, a.create_time, a.payer, a.pay_time, a.remark from zx_withdraw_deposit a LEFT JOIN sys_user b ON b.puser_id = a.client_id and b.user_type = a.client_type
    </sql>
	
    <select id="selectWithdrawDepositList" parameterType="WithdrawDeposit" resultMap="WithdrawDepositResult">
        <include refid="selectWithdrawDepositVos"/>
        <where>  
            ${filterSql}
            <if test="id != null and id != ''"> and a.id = #{id}</if>
             <if test="fundLogId != null and fundLogId != ''"> and a.fund_log_id = #{fundLogId}</if>
             <if test="serial != null and serial != ''"> and a.serial = #{serial}</if>
             <if test="clientId != null and clientId != ''"> and a.client_id = #{clientId}</if>
             <if test="clientType != null and clientType != ''"> and a.client_type = #{clientType}</if>
             <if test="clientName != null and clientName != ''"> and a.client_name like concat('%', #{clientName}, '%')</if>
             <if test="money != null and money != ''"> and a.money = #{money}</if>
             <if test="balance != null and balance != ''"> and a.balance = #{balance}</if>
             <if test="managerPhone != null and managerPhone != ''"> and a.manager_phone = #{managerPhone}</if>
             <if test="bankAccount != null and bankAccount != ''"> and a.bank_account = #{bankAccount}</if>
             <if test="bankReceiver != null and bankReceiver != ''"> and a.bank_receiver = #{bankReceiver}</if>
             <if test="bankName != null and bankName != ''"> and a.bank_name = #{bankName}</if>
             <if test="status != null and status != ''"> and a.status = #{status}</if>
             <if test="createTime != null"> and a.create_time = #{createTime}</if>
             <if test="payer != null and payer != ''"> and a.payer = #{payer}</if>
             <if test="payTime != null"> and a.pay_time = #{payTime}</if>
             <if test="remark != null and remark != ''"> and a.remark = #{remark}</if>
         </where>
         order by a.create_time desc
    </select>
    
    <select id="selectWithdrawDepositById" parameterType="Integer" resultMap="WithdrawDepositResult">
        <include refid="selectWithdrawDepositVo"/>
        where id = #{id}
    </select>
        
    <insert id="insertWithdrawDeposit" parameterType="WithdrawDeposit">
        insert into zx_withdraw_deposit
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null and id != '' ">id,</if>
			<if test="fundLogId != null and fundLogId != '' ">fund_log_id,</if>
			<if test="serial != null and serial != '' ">serial,</if>
			<if test="clientId != null and clientId != '' ">client_id,</if>
			<if test="clientType != null and clientType != '' ">client_type,</if>
			<if test="clientName != null and clientName != '' ">client_name,</if>
			<if test="money != null and money != '' ">money,</if>
			<if test="balance != null and balance != '' ">balance,</if>
			<if test="managerPhone != null and managerPhone != '' ">manager_phone,</if>
			<if test="bankAccount != null and bankAccount != '' ">bank_account,</if>
			<if test="bankReceiver != null and bankReceiver != '' ">bank_receiver,</if>
			<if test="bankName != null and bankName != '' ">bank_name,</if>
			<if test="status != null and status != '' ">status,</if>
			<if test="createTime != null ">create_time,</if>
			<if test="payer != null and payer != '' ">payer,</if>
			<if test="payTime != null ">pay_time,</if>
			<if test="remark != null and remark != '' ">remark,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null and id != ''">#{id},</if>
			<if test="fundLogId != null and fundLogId != ''">#{fundLogId},</if>
			<if test="serial != null and serial != ''">#{serial},</if>
			<if test="clientId != null and clientId != ''">#{clientId},</if>
			<if test="clientType != null and clientType != ''">#{clientType},</if>
			<if test="clientName != null and clientName != ''">#{clientName},</if>
			<if test="money != null and money != ''">#{money},</if>
			<if test="balance != null and balance != ''">#{balance},</if>
			<if test="managerPhone != null and managerPhone != ''">#{managerPhone},</if>
			<if test="bankAccount != null and bankAccount != ''">#{bankAccount},</if>
			<if test="bankReceiver != null and bankReceiver != ''">#{bankReceiver},</if>
			<if test="bankName != null and bankName != ''">#{bankName},</if>
			<if test="status != null and status != ''">#{status},</if>
			<if test="createTime != null">#{createTime},</if>
			<if test="payer != null and payer != ''">#{payer},</if>
			<if test="payTime != null">#{payTime},</if>
			<if test="remark != null and remark != ''">#{remark},</if>
         </trim>
    </insert>
	 
    <update id="updateWithdrawDeposit" parameterType="WithdrawDeposit">
        update zx_withdraw_deposit
        <trim prefix="SET" suffixOverrides=",">
            <if test="fundLogId != null  ">fund_log_id = #{fundLogId},</if>
            <if test="serial != null  and serial != ''  ">serial = #{serial},</if>
            <if test="clientId != null  ">client_id = #{clientId},</if>
            <if test="clientType != null  and clientType != ''  ">client_type = #{clientType},</if>
            <if test="clientName != null  and clientName != ''  ">client_name = #{clientName},</if>
            <if test="money != null  ">money = #{money},</if>
            <if test="balance != null  ">balance = #{balance},</if>
            <if test="managerPhone != null  and managerPhone != ''  ">manager_phone = #{managerPhone},</if>
            <if test="bankAccount != null  and bankAccount != ''  ">bank_account = #{bankAccount},</if>
            <if test="bankReceiver != null  and bankReceiver != ''  ">bank_receiver = #{bankReceiver},</if>
            <if test="bankName != null  and bankName != ''  ">bank_name = #{bankName},</if>
            <if test="status != null  and status != ''  ">status = #{status},</if>
            <if test="createTime != null  ">create_time = #{createTime},</if>
            <if test="payer != null  and payer != ''  ">payer = #{payer},</if>
            <if test="payTime != null  ">pay_time = #{payTime},</if>
            <if test="remark != null  and remark != ''  ">remark = #{remark},</if>
        </trim>
        where id = #{id}
    </update>

	<delete id="deleteWithdrawDepositById" parameterType="Integer">
        delete from zx_withdraw_deposit where id = #{id}
    </delete>
	
    <delete id="deleteWithdrawDepositByIds" parameterType="String">
        delete from zx_withdraw_deposit where id in 
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
    
</mapper>